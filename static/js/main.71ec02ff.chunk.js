(this["webpackJsonpmegaten-fusion-calculator"]=this["webpackJsonpmegaten-fusion-calculator"]||[]).push([[0],{138:function(e,n,t){},139:function(e,n,t){"use strict";t.r(n);var i=t(4),a=t(0),r=t.n(a),s=t(13),o=t.n(s),c=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,203)).then((function(n){var t=n.getCLS,i=n.getFID,a=n.getFCP,r=n.getLCP,s=n.getTTFB;t(e),i(e),a(e),r(e),s(e)}))},l=t(7),u=t(107),d=t(198),h=t(199),m=t(16),f=t(24),v=t(29),b=t(21),g=function e(n,t,i,a,r){Object(f.a)(this,e),this.id=0,this.name=void 0,this.lvl=void 0,this.race=void 0,this.rank=0,this.specialRecipe=!1,this.stats=[],this.id=n,this.name=t,this.lvl=i,this.race=a,this.stats=r};g.statsName=[];var j=function(){function e(n,t){Object(f.a)(this,e),this.demon=void 0,this.ingredients=void 0,this.demon=n,this.ingredients=t}return Object(v.a)(e,[{key:"isFused",value:function(){return!!this.ingredients&&this.ingredients.length>0}},{key:"getBaseIngredients",value:function(){if(this.ingredients){var e,n={},t=Object(m.a)(this.ingredients);try{for(t.s();!(e=t.n()).done;){var i=e.value;n=Object(b.a)(Object(b.a)({},n),i.getBaseIngredients())}}catch(r){t.e(r)}finally{t.f()}return n}var a={};return a[this.demon.id]=this.demon,a}},{key:"toBaseIngredientsIdCode",value:function(){return Object.keys(this.getBaseIngredients()).join("-")}},{key:"toBaseIngredientSearchString",value:function(){return Object.values(this.getBaseIngredients()).map((function(e){return e.name})).join(" ")}},{key:"isWeakerThanIngredients",value:function(){return this.demon.lvl<this.getHighestIngredientLvl()}},{key:"getHighestIngredientLvl",value:function(){var e=0;if(this.ingredients){var n,t=Object(m.a)(this.ingredients);try{for(t.s();!(n=t.n()).done;){var i=n.value.getHighestIngredientLvl();i>e&&(e=i)}}catch(a){t.e(a)}finally{t.f()}return e}return this.demon.lvl}}]),e}(),p=function e(n,t){Object(f.a)(this,e),this.caption="",this.demons=[],this.caption=n,this.demons=t},O="Element",y=function(){function e(n,t,i){Object(f.a)(this,e),this.demonJson=void 0,this.fusionChartJson=void 0,this.presetJson=void 0,this.demonAry=[],this.normalFusionChart={},this.tripleFusionChart={},this.demonsPresets=[],this.gameHasElements=!1,this._usePersonaSameRaceFusionMechanic=!1,this._usePersonaTripleFusionMechanic=!1,this.disableSameDemonFusion=!1,this.idMap={},this.nameMap={},this.raceOrderMap={},this.raceLvlDemonMap={},this.demonJson=n,this.fusionChartJson=t,this.presetJson=i,this.parseDemons(),this.prepDemonIds(),this.parseFusionChart(),this.prepRaceLvlInfo(),this.parsePresets()}return Object(v.a)(e,[{key:"getDemonById",value:function(e){return this.idMap[e]}},{key:"getDemonByName",value:function(e){return this.nameMap[e]}},{key:"getDemonArray",value:function(){return this.demonAry}},{key:"getDemonPresets",value:function(){return this.demonsPresets}},{key:"fuseDemons",value:function(e,n){if(e.id!==n.id||!this.disableSameDemonFusion)return e.race===O&&n.race===O?void 0:e.race===O||n.race===O?this.fuseDemonWithElement(e,n):e.race===n.race?this.fuseDemonSameRaceNoElement(e,n):this.fuseDemonDiffRaceNoElement(e,n)}},{key:"tripleFuseDemons",value:function(e,n,t){var i=this;if(!this.disableSameDemonFusion||e.id!==n.id&&e.id!==t.id&&n.id!==t.id){var a=[e,n,t].sort((function(e,n){return e.lvl!==n.lvl?e.lvl-n.lvl:i.getRaceOrder(n.race)-i.getRaceOrder(e.race)})),r=Object(l.a)(a,3),s=r[0],o=r[1],c=r[2],u=this.getFusionRace(s.race,o.race);if(u){var d=this.getTripleFusionRace(u,c.race);if(d){var h=this.getLvlTableForRace(d,!0),m=(s.lvl+o.lvl+c.lvl+12.75)/3,f=this.findResultLvlFromLvlTable(h,m,!0),v=this.getDemonFromRaceLvl(d,f);if(v){if(v.id!==s.id&&v.id!==o.id&&v.id!==c.id)return v;var b=h.indexOf(f);if(!(b<0))return b+1<h.length?(f=h[b+1],this.getDemonFromRaceLvl(d,f)):void 0}}}}}},{key:"testGetDemon",value:function(e){if(e)return this.getDemonByName(e);if(0!==this.demonAry.length){var n=Math.floor(Math.random()*this.demonAry.length);return this.demonAry[n]}}},{key:"testGetRandomElement",value:function(){if(this.fusionChartJson.elements&&0!==this.fusionChartJson.elements.length){var e=Math.floor(Math.random()*this.fusionChartJson.elements.length);return this.getDemonByName(this.fusionChartJson.elements[e])}}},{key:"testFuseDemonWithAll",value:function(e){var n=this.testGetDemon(e);if(n){for(var t={},i=0;i<this.demonAry.length;i++){var a=this.demonAry[i],r=this.fuseDemons(n,a);r&&(t[a.name]=r)}console.log(n),console.log(t)}}},{key:"testTripleFuseDemonWithAll",value:function(e){var n=this.testGetDemon(e);if(n){for(var t={},i={},a=0;a<this.demonAry.length;a++)for(var r=this.demonAry[a],s=a;s<this.demonAry.length;s++){var o=this.demonAry[s],c=this.tripleFuseDemons(n,r,o);c&&(t[c.name]||(t[c.name]=[]),i[c.name]||(i[c.name]={}),i[c.name][r.name]||(i[c.name][r.name]=[]),i[c.name][o.name]||(i[c.name][o.name]=[]),t[c.name].push([r,o]),i[c.name][r.name].push(o.name),i[c.name][o.name].push(r.name))}console.log(n),console.log(t),console.log(i)}}},{key:"parseDemons",value:function(){g.statsName=this.demonJson.statsName;var e=this.demonJson.demons;for(var n in e){var t=e[n];this.demonAry.push(new g(0,n,t.lvl,t.race,t.stats))}}},{key:"parseFusionChart",value:function(){this.fusionChartJson.elements&&this.fusionChartJson.elements.length>0&&(this.gameHasElements=!0),this.fusionChartJson.usePersonaSameRaceFusionMechanic&&(this._usePersonaSameRaceFusionMechanic=!0),this.fusionChartJson.usePersonaTripleFusionMechanic&&(this._usePersonaTripleFusionMechanic=!0),this.fusionChartJson.disableSameDemonFusion&&(this.disableSameDemonFusion=!0);for(var e=0;e<this.fusionChartJson.raceFusionTable.length;e++)for(var n=0;n<this.fusionChartJson.raceFusionTable[e].length;n++){var t=[];if(this._usePersonaTripleFusionMechanic)n<e?t.push(this.tripleFusionChart):n===e?(t.push(this.tripleFusionChart),t.push(this.normalFusionChart)):t.push(this.normalFusionChart);else{if(n>e)continue;t.push(this.normalFusionChart)}for(var i=this.fusionChartJson.races[e],a=this.fusionChartJson.races[n],r=this.fusionChartJson.raceFusionTable[e][n],s=0,o=t;s<o.length;s++){var c=o[s];c[i]||(c[i]={}),c[i][a]=r,c[a]||(c[a]={}),c[a][i]=r}}if(this.fusionChartJson.specialRecipes)for(var l in this.fusionChartJson.specialRecipes){var u=this.getDemonByName(l);u&&(u.specialRecipe=!0,u.rank=1e3)}for(var d=0;d<this.fusionChartJson.races.length;d++)this.raceOrderMap[this.fusionChartJson.races[d]]=d}},{key:"parsePresets",value:function(){if(this.presetJson){var e,n=Object(m.a)(this.presetJson.presets);try{for(n.s();!(e=n.n()).done;){var t,i=e.value,a=[],r=Object(m.a)(i.demons);try{for(r.s();!(t=r.n()).done;){var s=t.value,o=this.getDemonByName(s);o&&a.push(o)}}catch(l){r.e(l)}finally{r.f()}var c=new p(i.caption,a);this.demonsPresets.push(c)}}catch(l){n.e(l)}finally{n.f()}}}},{key:"prepDemonIds",value:function(){this.demonAry=this.demonAry.sort((function(e,n){return e.lvl>n.lvl?1:-1}));var e,n=1,t=Object(m.a)(this.demonAry);try{for(t.s();!(e=t.n()).done;){var i=e.value;i.id=n,this.idMap[i.id]=i,this.nameMap[i.name]=i,n++}}catch(a){t.e(a)}finally{t.f()}}},{key:"prepRaceLvlInfo",value:function(){var e,n=Object(m.a)(this.demonAry);try{for(n.s();!(e=n.n()).done;){var t=e.value;this.raceLvlDemonMap[t.race]||(this.raceLvlDemonMap[t.race]={}),this.raceLvlDemonMap[t.race][t.lvl]=t}}catch(s){n.e(s)}finally{n.f()}var i,a=Object(m.a)(this.demonAry);try{for(a.s();!(i=a.n()).done;){var r=i.value;r.specialRecipe||(r.rank=this.getLvlTableForRace(r.race,!0).indexOf(r.lvl))}}catch(s){a.e(s)}finally{a.f()}}},{key:"getLvlTableForRace",value:function(e,n){if(!this.raceLvlDemonMap[e])return[];var t=[];for(var i in this.raceLvlDemonMap[e])n&&this.raceLvlDemonMap[e][i].specialRecipe||t.push(Number(i));return t}},{key:"getDemonFromRaceLvl",value:function(e,n){if(this.raceLvlDemonMap[e]&&this.raceLvlDemonMap[e][n])return this.raceLvlDemonMap[e][n]}},{key:"getFusionRace",value:function(e,n){if(this.normalFusionChart[e]&&this.normalFusionChart[e][n])return this.normalFusionChart[e][n]}},{key:"getTripleFusionRace",value:function(e,n){if(this.tripleFusionChart[e]&&this.tripleFusionChart[e][n])return this.tripleFusionChart[e][n]}},{key:"getRaceOrder",value:function(e){return this.raceOrderMap[e]}},{key:"findResultLvlFromLvlTable",value:function(e,n,t){for(var i=0,a=0;a<e.length;a++)n>e[a]&&i++;if(i>=e.length){if(t)return-1;i=e.length-1}return e[i]}},{key:"fuseDemonDiffRaceNoElement",value:function(e,n){var t=this.getFusionRace(e.race,n.race);if(t){var i=this.getLvlTableForRace(t,!0);if(0!==i.length){var a=(n.lvl+e.lvl+1)/2,r=this.findResultLvlFromLvlTable(i,a);return this.getDemonFromRaceLvl(t,r)}}}},{key:"fuseDemonSameRaceNoElement",value:function(e,n){if(this.gameHasElements){var t=this.getFusionRace(e.race,n.race);if(!t)return;return this.getDemonByName(t)}if(this._usePersonaSameRaceFusionMechanic){var i,a=this.getLvlTableForRace(n.race,!0).filter((function(n){return n!==e.lvl})),r=-1,s=Object(m.a)(a);try{for(s.s();!(i=s.n()).done;){var o=i.value;e.lvl+n.lvl>=2*o&&(r+=1)}}catch(l){s.e(l)}finally{s.f()}if(a[r]===n.lvl&&(r-=1),r<0)return;var c=a[r];return this.getDemonFromRaceLvl(e.race,c)}}},{key:"fuseDemonWithElement",value:function(e,n){var t,i;if(e.race===O)t=e,i=n;else{if(n.race!==O)return this.fuseDemonSameRaceNoElement(e,n);t=n,i=e}var a=this.fusionChartJson.races.indexOf(i.race);if(!(a<0||a>=this.fusionChartJson.elementFusionTable.length)){var r=this.fusionChartJson.elementFusionTable[a][t.rank],s=this.getLvlTableForRace(i.race),o=i.rank+r;if(!(o<0||o>=s.length))return this.getDemonFromRaceLvl(i.race,s[o])}}},{key:"usePersonaTripleFusionMechanic",get:function(){return this._usePersonaTripleFusionMechanic}},{key:"usePersonaSameRaceFusionMechanic",get:function(){return this._usePersonaSameRaceFusionMechanic}}]),e}(),x=t(54),C=t(193),F=t(195),D=t(188),S=t(192),_=t(194),k=t(191),R=t(148),N=t(201),I=t(111),L=t(63),A=t.n(L),P=function(e){var n=e.dataTableProvider,t=r.a.useState(0),a=Object(l.a)(t,2),s=a[0],o=a[1],c=r.a.useState(void 0),u=Object(l.a)(c,2),d=u[0],h=u[1],f=r.a.useState(void 0),v=Object(l.a)(f,2),g=v[0],j=v[1],p=r.a.useState("string"),O=Object(l.a)(p,2),y=O[0],x=O[1],N=n.pageSize,L=n.getColumnDefinition(),P=n.getRowData(),w=P.length;if(0===w)return Object(i.jsx)(r.a.Fragment,{});var J=P.map((function(e,n){return{id:n,data:e}}));if(d&&void 0!==g){var E="asc"===g?1:-1,U="number"===y?M:B;J.sort((function(e,t){var i=n.getSortValue(e.data,d),a=n.getSortValue(t.data,d);return E*U(i,a)}))}var H=J.filter((function(e,n){return n>=s*N&&n<(s+1)*N}));var V,z=[],G=0,W=Object(m.a)(L);try{for(W.s();!(V=W.n()).done;){var K=V.value,Q=K.sortSpec?T(K.headerContent,G,K.sortSpec.sortType,[d,h],[g,j],[y,x]):K.headerContent;z.push(Object(i.jsx)(D.a,Object(b.a)(Object(b.a)({},K.headerProps),{},{children:Q}))),G++}}catch($){W.e($)}finally{W.f()}var X,q=[],Y=Object(m.a)(H);try{for(Y.s();!(X=Y.n()).done;){var Z=X.value;q.push(Object(i.jsx)(k.a,{children:n.renderRow(Z.data)},Z.id))}}catch($){Y.e($)}finally{Y.f()}return Object(i.jsx)(I.a,{className:A.a.paperContainer,elevation:1,children:Object(i.jsxs)(S.a,{className:A.a.tableContainer,children:[Object(i.jsxs)(C.a,{children:[Object(i.jsx)(_.a,{className:A.a.header,children:Object(i.jsx)(k.a,{children:z})}),Object(i.jsx)(F.a,{className:A.a.tableBody,children:q})]}),Object(i.jsx)(R.a,{rowsPerPageOptions:[N],component:"div",count:w,rowsPerPage:N,page:s,onChangePage:function(e,n){o(n)}})]})})};function B(e,n){return e>n?1:e===n?0:-1}function M(e,n){return e-n}function T(e,n,t,a,r,s){var o=Object(l.a)(a,1)[0],c=Object(l.a)(r,1)[0];return Object(i.jsx)(N.a,{active:o===n&&void 0!==c,direction:o===n?c:void 0,onClick:w(n,t,a,r,s),children:e})}function w(e,n,t,i,a){return function(r){var s=Object(l.a)(t,2),o=s[0],c=s[1],u=Object(l.a)(i,2),d=u[0],h=u[1],m=Object(l.a)(a,2)[1],f=d;o===e?("asc"===d&&(f="desc"),"desc"===d&&(f=void 0),void 0===d&&(f="asc")):f="asc",h(f),c(e),m(n)}}var J,E=t(114),U=t(46),H=t(100),V=t.n(H),z=t(76),G=t.n(z);function W(e){return Object(i.jsx)(U.a,{onClick:function(n){e.onRemoveIngredient&&e.onRemoveIngredient(e.demonId)},className:G.a.removeDemonButton,children:Object(i.jsx)(V.a,{className:G.a.removeDemonButtonIcon})})}function K(e){var n=e.demonId,t=e.setting,a=e.ingredientsSettings,r=!1;switch(t){case J.mustUse:r=a[n].mustUse;break;case J.multipleUse:default:r=a[n].multipleUse}return Object(i.jsx)(E.a,{className:G.a.checkBox,defaultChecked:r,onChange:function(e,i){switch(t){case J.mustUse:a[n].mustUse=e.target.checked;break;case J.multipleUse:default:a[n].multipleUse=e.target.checked}},color:"default"})}!function(e){e[e.multipleUse=1]="multipleUse",e[e.mustUse=2]="mustUse"}(J||(J={}));var Q=function(){function e(n,t){Object(f.a)(this,e),this.pageSize=25,this.demonCompendium=void 0,this.ingredients=void 0,this.ingredientsSettings=void 0,this.onRemoveIngredient=void 0,this.rowData=void 0,this.demonCompendium=n.demonCompendium,this.ingredients=n.ingredients,this.ingredientsSettings=n.ingredientsSettings,this.onRemoveIngredient=n.onRemoveIngredient,this.rowData=t}return Object(v.a)(e,[{key:"getColumnDefinition",value:function(){return[{headerContent:"Demon",sortSpec:{sortType:"string"}},{headerContent:"Level",sortSpec:{sortType:"number"}},{headerContent:"Race",sortSpec:{sortType:"string"}},{headerContent:"Must Use in Fusion",headerProps:{width:70,align:"center"}},{headerContent:"Can Use Multiple per Recipe",headerProps:{width:120,align:"center"}},{}]}},{key:"getRowData",value:function(){return this.rowData}},{key:"renderRow",value:function(e){return Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)(D.a,{children:e.name}),Object(i.jsx)(D.a,{children:e.lvl}),Object(i.jsx)(D.a,{children:e.race}),Object(i.jsx)(D.a,{align:"center",children:Object(i.jsx)(K,{demonId:e.id,setting:J.mustUse,ingredientsSettings:this.ingredientsSettings})}),Object(i.jsx)(D.a,{align:"center",children:Object(i.jsx)(K,{demonId:e.id,setting:J.multipleUse,ingredientsSettings:this.ingredientsSettings})}),Object(i.jsx)(D.a,{children:Object(i.jsx)(W,{demonId:e.id,onRemoveIngredient:this.onRemoveIngredient})})]})}},{key:"getSortValue",value:function(e,n){switch(n){case 0:return e.name;case 1:return e.lvl;case 2:return e.race;default:return e.name}}}]),e}(),X=function(e){!function(e,n){for(var t in e)n[t]||(n[t]={mustUse:!1,multipleUse:!1})}(e.ingredients,e.ingredientsSettings);var n=r.a.useMemo((function(){var n=[];for(var t in e.ingredients){var i=e.demonCompendium.getDemonById(Number(t));i&&n.push(i)}return n}),[e.ingredients,e.demonCompendium]),t=new Q(e,n);return Object(i.jsx)(P,{dataTableProvider:t})},q=r.a.memo(X),Y=t(101),Z=t(26),$=t.n(Z);function ee(e){return e.isFused()?Object(i.jsx)(r.a.Fragment,{children:e.demon.name}):Object(i.jsx)("span",{className:$.a.baseIngredientName,children:e.demon.name})}function ne(e){var n=Object(i.jsx)(r.a.Fragment,{});if(e.ingredients){var t,a=Object(i.jsx)(r.a.Fragment,{}),s=!0,o=Object(m.a)(e.ingredients);try{for(o.s();!(t=o.n()).done;){var c=t.value;n=Object(i.jsxs)(r.a.Fragment,{children:[n,ne(c)]});var l=s?void 0:Object(i.jsx)(r.a.Fragment,{children:" + "});a=Object(i.jsxs)(r.a.Fragment,{children:[a,l,ee(c)]}),s=!1}}catch(d){o.e(d)}finally{o.f()}var u=ee(e);return Object(i.jsxs)(r.a.Fragment,{children:[n,Object(i.jsxs)("div",{className:$.a.recipeLine,children:[a," = ",u]})]})}return n}function te(e){return Object(i.jsx)("div",{children:ne(e.value)})}function ie(e){return e.value.toBaseIngredientSearchString()}var ae=function(e){for(var n=e.fusionResults,t=[{field:"name",headerName:"Demon",width:120},{field:"lvl",headerName:"Level",width:70,headerAlign:"center",resizable:!1,disableColumnMenu:!0},{field:"race",headerName:"Race",width:100,headerAlign:"center",resizable:!1}],r=g.statsName,s=0;s<r.length;s++)t.push({field:"stat"+s,headerName:r[s],width:60,headerAlign:"center",resizable:!1,disableColumnMenu:!0});t.push({field:"recipe",headerName:"Recipe",flex:1,renderCell:te,valueGetter:ie});var o=[];for(var c in n)if(1!==Number(c))for(var l in n[c]){var u,d=Object(m.a)(n[c][l]);try{for(d.s();!(u=d.n()).done;){for(var h=u.value,f=h.demon,v={id:0,name:f.name,lvl:f.lvl,race:f.race,recipe:h},b=0;b<r.length;b++)v["stat"+b]=f.stats[b];o.push(v)}}catch(x){d.e(x)}finally{d.f()}}o.sort((function(e,n){return n.lvl-e.lvl}));for(var j=1,p=0,O=o;p<O.length;p++){O[p].id=j,j++}var y=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=y.current;if(e){var n=e.querySelector("div");n.style.height="",n.style.width=""}}),[]),Object(i.jsx)(Y.a,{rows:o,rowHeight:75,className:$.a.fusionResultsTable,columns:t,disableSelectionOnClick:!0,autoHeight:!0,rowsPerPageOptions:[10],density:"compact"})},re=r.a.memo(ae),se=t(116),oe=t(143),ce=t(53),le=t.n(ce),ue=function e(){Object(f.a)(this,e),this.charLvl=99,this.maxIngredient=3,this.useTripleFusion=!1,this.useTripleFusionSettingIsVisible=!1};function de(e){var n=e.visible,t=e.settings,r=Object(a.useState)(t.charLvl),s=Object(l.a)(r,2),o=s[0],c=s[1],u=Object(a.useState)(t.maxIngredient),d=Object(l.a)(u,2),h=d[0],m=d[1];var f={};return n||(f.display="none"),Object(i.jsxs)("div",{style:f,className:le.a.settingsPanel,children:[Object(i.jsx)("h2",{children:"Settings"}),Object(i.jsx)(he,{label:"Character level",min:1,max:99,emptyFieldValue:99,fieldStateValueAndSetter:[o,c],onSetSettings:function(e){t.charLvl=e}}),Object(i.jsx)(he,{label:"Max ingredients per recipe",min:2,max:5,emptyFieldValue:3,fieldStateValueAndSetter:[h,m],onSetSettings:function(e){t.maxIngredient=e}}),t.useTripleFusionSettingIsVisible?Object(i.jsx)(me,{label:"Allow triple fusion",checked:t.useTripleFusion,onSetSettings:function(e){t.useTripleFusion=e}}):void 0]})}function he(e){var n=e.label,t=e.fieldStateValueAndSetter,a=e.onSetSettings,r=e.min,s=e.max,o=e.emptyFieldValue,c=Object(l.a)(t,2),u=c[0],d=c[1];return Object(i.jsxs)("div",{className:"".concat(le.a.settingsLine," ").concat(le.a.numberSettings),children:[Object(i.jsx)("span",{className:le.a.numberFieldLabel,children:n}),Object(i.jsx)(se.a,{style:{width:"50px"},type:"number",InputLabelProps:{shrink:!0},inputProps:{min:r,max:s,step:1},variant:"outlined",value:u,onChange:function(e){var n=e.target.value;if(""===n)return d(""),void a(o);var t=Number(n);t>=r&&t<=s&&(d(t),a(t))}})]})}function me(e){var n=e.label,t=e.checked,a=e.onSetSettings;return Object(i.jsx)("div",{className:"".concat(le.a.settingsLine),children:Object(i.jsx)(oe.a,{control:Object(i.jsx)(E.a,{defaultChecked:t,onChange:function(e){a(e.target.checked)},color:"default"}),label:n})})}var fe=t(200),ve=t(103),be=t.n(ve);function ge(e){var n=e.demonCompendium,t=e.onAddDemon,a=Object(i.jsx)(r.a.Fragment,{});return n.getDemonPresets().length>0&&(a=Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)("p",{children:"Add from presets"}),Object(i.jsx)(Oe,{demonCompendium:n,onAddDemon:t})]})),Object(i.jsxs)("div",{className:$.a.demonAdderContainer,children:[Object(i.jsx)("p",{children:"Add by searching"}),Object(i.jsx)(je,{demonCompendium:n,onAddDemon:t}),Object(i.jsx)("p",{children:"Add by entering level range"}),Object(i.jsx)(pe,{demonCompendium:n,onAddDemon:t}),a]})}function je(e){var n=e.demonCompendium,t=e.onAddDemon,r=Object(a.useState)(null),s=Object(l.a)(r,2),o=s[0],c=s[1],u=n.getDemonArray();function d(){o&&(t([o]),c(null))}return Object(i.jsxs)("div",{className:$.a.subAdderContainer,children:[Object(i.jsx)(fe.a,{value:o,options:u,onChange:function(e,n){c(n)},onKeyPress:function(e){"Enter"===e.key&&d()},getOptionLabel:function(e){return e.name},getOptionSelected:function(e,n){return e.id===n.id},style:{width:300},autoHighlight:!0,autoSelect:!0,renderInput:function(e){return Object(i.jsx)(se.a,Object(b.a)(Object(b.a)({},e),{},{label:"Enter demon name",variant:"outlined"}))}}),Object(i.jsx)(ye,{onClick:function(){d()}})]})}function pe(e){var n=e.demonCompendium,t=e.onAddDemon,r=Object(a.useState)(1),s=Object(l.a)(r,2),o=s[0],c=s[1],u=Object(a.useState)(99),d=Object(l.a)(u,2),h=d[0],f=d[1];function v(e){for(var n=e.key,t=!1,i=0,a=["0","1","2","3","4","5","6","7","8","9"];i<a.length;i++){if(n===a[i]){t=!0;break}}t||(e.preventDefault(),e.stopPropagation())}function b(e,n){var t=n.target.value,i=Number(t);(""===t||i>=1&&i<=99)&&e(n.target.value)}return Object(i.jsxs)("div",{className:$.a.subAdderContainer,children:[Object(i.jsxs)("div",{className:$.a.lvlFieldsContainer,children:[Object(i.jsx)(se.a,{label:"Min Lv",style:{width:"147px"},type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:o,onChange:b.bind(void 0,c),onKeyPress:v}),Object(i.jsx)(se.a,{label:"Max Lv",style:{width:"147px"},type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:h,onKeyPress:v,onChange:b.bind(void 0,f)})]}),Object(i.jsx)(ye,{onClick:function(){var e,i=[],a=Object(m.a)(n.getDemonArray());try{for(a.s();!(e=a.n()).done;){var r=e.value;r.lvl>=o&&r.lvl<=h&&i.push(r)}}catch(s){a.e(s)}finally{a.f()}t(i)}})]})}function Oe(e){var n,t=e.demonCompendium,r=e.onAddDemon,s=Object(a.useState)(null),o=Object(l.a)(s,2),c=o[0],u=o[1],d=[],h=1,f=Object(m.a)(t.getDemonPresets());try{for(f.s();!(n=f.n()).done;){var v=n.value;d.push({id:h,preset:v}),h++}}catch(j){f.e(j)}finally{f.f()}function g(){c&&(r(c.preset.demons),u(null))}return Object(i.jsxs)("div",{className:$.a.subAdderContainer,children:[Object(i.jsx)(fe.a,{value:c,options:d,onChange:function(e,n){u(n)},onKeyPress:function(e){"Enter"===e.key&&g()},getOptionLabel:function(e){return e.preset.caption},getOptionSelected:function(e,n){return e.id===n.id},style:{width:300},autoHighlight:!0,autoSelect:!0,renderInput:function(e){return Object(i.jsx)(se.a,Object(b.a)(Object(b.a)({},e),{},{label:"Select a preset",variant:"outlined"}))}}),Object(i.jsx)(ye,{onClick:function(){g()}})]})}function ye(e){var n=e.onClick;return Object(i.jsxs)(x.a,{variant:"outlined",onClick:n,className:$.a.addDemonButton,children:[Object(i.jsx)(be.a,{}),"Add"]})}var xe,Ce,Fe=t(106),De=t.n(Fe),Se=t(104),_e=t.n(Se),ke=t(105),Re=t.n(ke),Ne=t(45),Ie=t.n(Ne);function Le(e,n,t,i,a){for(var r=[];Ae(r,a);){var s=r[0],o=r[1],c=r[2],l={};for(var u in i[s])if(0!==i[s][u].length){var d=i[s][u][0].demon,h={};for(var f in i[o])if(!l[Number(f)]&&0!==i[o][f].length){var v=i[o][f][0].demon;for(var b in i[c])if(!l[Number(b)]&&!h[Number(b)]&&0!==i[c][b].length){var g=i[c][b][0].demon,j=n.tripleFuseDemons(d,v,g);if(j&&Pe(i,t,j,a,[d,v,g])){var p=Be(j,i[s][u],i[o][f],i[c][b]);i[a][j.id]||(i[a][j.id]=[]);var O,y=Object(m.a)(p);try{for(y.s();!(O=y.n()).done;){var x=O.value;i[a][j.id].push(x)}}catch(C){y.e(C)}finally{y.f()}}}h[v.id]=!0}l[d.id]=!0}}}function Ae(e,n){if(n<3)return!1;if(e.length<3)return e[0]=n-2,e[1]=1,e[2]=1,!0;for(var t=e.length-2;t>=0;t--){var i=t+1;if(e[t]-e[i]>=2)return e[t]=e[t]-1,e[i]=e[i]+1,!0}return!1}function Pe(e,n,t,i,a){for(var r=!1,s=i-1;s>=1;s--)if(e[s][t.id]){r=!0;break}if(r)return!1;if(t.lvl>n.charLvl)return!1;if(i===n.maxIngredient){var o,c=Object(m.a)(a);try{for(c.s();!(o=c.n()).done;){var l=o.value;if(t.lvl<l.lvl)return!1}}catch(u){c.e(u)}finally{c.f()}}return!0}function Be(e){for(var n=[],t=[],i=arguments.length,a=new Array(i>1?i-1:0),r=1;r<i;r++)a[r-1]=arguments[r];for(var s=0;s<a.length;s++)n.push(0);for(;;){for(var o=[],c=0;c<a.length;c++)o.push(a[c][n[c]]);t.push(new j(e,o));for(var l=!0,u=n.length-1;u>=0;u--){var d=n[u];if(l&&(d+=1,l=!1),d>=a[u].length&&(d=0,l=!0),n[u]=d,!l)break}if(l)break}return t}function Me(e){var n=Object(b.a)({},xe);delete n[e],Ce(n)}var Te,we={};function Je(e){var n=e.demonCompendium,t=Object(a.useState)({}),r=Object(l.a)(t,2);xe=r[0],Ce=r[1];var s=Object(a.useState)({}),o=Object(l.a)(s,2),c=o[0],u=o[1],d=Object(a.useState)(!1),h=Object(l.a)(d,2),f=h[0],v=h[1],g=Object(a.useState)(1),p=Object(l.a)(g,2),O=p[0],y=p[1];Te||((Te=new ue).useTripleFusion=n.usePersonaTripleFusionMechanic,Te.useTripleFusionSettingIsVisible=n.usePersonaTripleFusionMechanic);var C=Object(a.useRef)(null);return Object(i.jsxs)("div",{className:Ie.a.fusionRecommender,children:[Object(i.jsx)("h2",{children:"Add demons to use as fusion ingredients"}),Object(i.jsxs)("div",{className:Ie.a.addDemonsAndButtonsRowContainer,children:[Object(i.jsx)(ge,{demonCompendium:n,onAddDemon:function(e){var n,t=Object(b.a)({},xe),i=Object(m.a)(e);try{for(i.s();!(n=i.n()).done;){t[n.value.id]=!0}}catch(a){i.e(a)}finally{i.f()}Ce(t)}},O),Object(i.jsxs)("div",{className:Ie.a.buttonsRow,children:[Object(i.jsxs)(x.a,{className:Ie.a.calculateButton,variant:"outlined",onClick:function(){u(function(e,n,t){for(var i={},a=1;a<=t.maxIngredient&&a<=7;a++)i[a]={};for(var r in e){var s=n.getDemonById(Number(r));if(s){var o=new j(s);i[1][s.id]||(i[1][s.id]=[]),i[1][s.id].push(o)}}for(var c=2;c<=t.maxIngredient&&c<=7;c++){for(var l=c-1;l>=c/2;l--){var u=c-l,d={};for(var h in i[l])if(0!==i[l][h].length){var f=i[l][h][0].demon;for(var v in i[u])if(0!==i[u][v].length){var b=i[u][v][0].demon;if(!d[b.id]){var g=n.fuseDemons(f,b);if(g&&Pe(i,t,g,c,[f,b])){var p=Be(g,i[l][h],i[u][v]);i[c][g.id]||(i[c][g.id]=[]);var O,y=Object(m.a)(p);try{for(y.s();!(O=y.n()).done;){var x=O.value;i[c][g.id].push(x)}}catch(S){y.e(S)}finally{y.f()}}}}d[f.id]=!0}}t.useTripleFusion&&Le(0,n,t,i,c)}for(var C in i)if(1!==Number(C))for(var F in i[C]){var D=i[C][F].filter((function(e){return!e.isWeakerThanIngredients()}));i[C][F]=D}return i}(xe,n,Te))},disabled:0===Object.keys(xe).length,children:[Object(i.jsx)(_e.a,{}),"Calculate"]}),Object(i.jsx)(x.a,{className:Ie.a.settingsButton,variant:"outlined",onClick:function(){v(!f),console.log(we)},children:Object(i.jsx)(Re.a,{})}),Object(i.jsxs)(x.a,{className:Ie.a.resetButton,variant:"outlined",onClick:function(){Ce({}),we={},u({}),y((O+1)%2)},children:[Object(i.jsx)(De.a,{}),"Reset"]})]})]}),Object(i.jsx)(de,{visible:f,settings:Te},O),Object(i.jsx)("h2",{children:"Fusion Ingredients"}),Object(i.jsx)(q,{demonCompendium:n,ingredients:xe,ingredientsSettings:we,onRemoveIngredient:Me}),Object(i.jsx)("h2",{ref:C,children:"Results"}),Object(i.jsx)(re,{fusionResults:c})]})}t(138);var Ee=Object(u.a)({palette:{type:"dark"},typography:{fontFamily:"sans-serif",fontSize:14}});function Ue(){var e=Object(a.useState)(void 0),n=Object(l.a)(e,2),s=n[0],o=n[1];Object(a.useEffect)((function(){s||function(e){var n=t.e(4).then(t.t.bind(null,204,3)).then((function(e){return e.default})),i=t.e(5).then(t.t.bind(null,205,3)).then((function(e){return e.default}));Promise.all([n,i]).then((function(n){var t=new y(n[0],n[1]);e(t)}))}(o)}),[s]);var c=s?Object(i.jsx)(Je,{demonCompendium:s}):Object(i.jsx)(r.a.Fragment,{});return Object(i.jsxs)(d.a,{theme:Ee,children:[Object(i.jsx)(h.a,{}),Object(i.jsxs)("div",{className:"myApp",children:[Object(i.jsx)("header",{className:"App-header",children:Object(i.jsx)("h1",{children:"Megami Tensei Fusion Recommender"})}),c]})]})}o.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(Ue,{})}),document.getElementById("root")),c()},26:function(e,n,t){e.exports={demonAdderContainer:"ui-components_demonAdderContainer__2j3Dm",subAdderContainer:"ui-components_subAdderContainer__wG2As",lvlFieldsContainer:"ui-components_lvlFieldsContainer__1OXHc",addDemonButton:"ui-components_addDemonButton__1BBcP",removeDemonButtonIcon:"ui-components_removeDemonButtonIcon__2ga3t",fusionResultsTable:"ui-components_fusionResultsTable__2Hl-s",baseIngredientName:"ui-components_baseIngredientName__18Eu_",recipeLine:"ui-components_recipeLine__12QIM"}},45:function(e,n,t){e.exports={fusionRecommender:"fusion-recommender_fusionRecommender__zW_X6",addDemonsAndButtonsRowContainer:"fusion-recommender_addDemonsAndButtonsRowContainer__3PpcL",buttonsRow:"fusion-recommender_buttonsRow__2bfHg",calculateButton:"fusion-recommender_calculateButton__31QNj",shining:"fusion-recommender_shining__1og21",settingsButton:"fusion-recommender_settingsButton__2v9Cz",resetButton:"fusion-recommender_resetButton__3V_j0"}},53:function(e,n,t){e.exports={settingsPanel:"settings-panel_settingsPanel__1T-fU",settingsLine:"settings-panel_settingsLine__nhSDF",numberSettings:"settings-panel_numberSettings__29pFN",numberFieldLabel:"settings-panel_numberFieldLabel__1csHC"}},63:function(e,n,t){e.exports={paperContainer:"data-table_paperContainer__1HiKS",tableContainer:"data-table_tableContainer__2tNCz",header:"data-table_header__1apdC",tableBody:"data-table_tableBody__lN2In"}},76:function(e,n,t){e.exports={checkBox:"ingredients-table_checkBox__G-IIC",removeDemonButton:"ingredients-table_removeDemonButton__1uK5F",removeDemonButtonIcon:"ingredients-table_removeDemonButtonIcon__mVoSL"}}},[[139,1,2]]]);
//# sourceMappingURL=main.71ec02ff.chunk.js.map
(this["webpackJsonpmegaten-fusion-calculator"]=this["webpackJsonpmegaten-fusion-calculator"]||[]).push([[0],{140:function(e,n,t){},141:function(e,n,t){"use strict";t.r(n);var a=t(4),i=t(0),r=t.n(i),s=t(13),o=t.n(s),c=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,205)).then((function(n){var t=n.getCLS,a=n.getFID,i=n.getFCP,r=n.getLCP,s=n.getTTFB;t(e),a(e),i(e),r(e),s(e)}))},l=t(7),u=t(109),d=t(200),h=t(201),m=t(16),f=t(24),v=t(29),b=t(21),g=function e(n,t,a,i,r){Object(f.a)(this,e),this.id=0,this.name=void 0,this.lvl=void 0,this.race=void 0,this.rank=0,this.specialRecipe=!1,this.stats=[],this.id=n,this.name=t,this.lvl=a,this.race=i,this.stats=r};g.statsName=[];var j=function(){function e(n,t){Object(f.a)(this,e),this.demon=void 0,this.ingredients=void 0,this.demon=n,this.ingredients=t}return Object(v.a)(e,[{key:"isFused",value:function(){return!!this.ingredients&&this.ingredients.length>0}},{key:"getBaseIngredients",value:function(){if(this.ingredients){var e,n={},t=Object(m.a)(this.ingredients);try{for(t.s();!(e=t.n()).done;){var a=e.value;n=Object(b.a)(Object(b.a)({},n),a.getBaseIngredients())}}catch(r){t.e(r)}finally{t.f()}return n}var i={};return i[this.demon.id]=this.demon,i}},{key:"toBaseIngredientsIdCode",value:function(){return Object.keys(this.getBaseIngredients()).join("-")}},{key:"toBaseIngredientSearchString",value:function(){return Object.values(this.getBaseIngredients()).map((function(e){return e.name})).join(" ")}},{key:"isWeakerThanIngredients",value:function(){return this.demon.lvl<this.getHighestIngredientLvl()}},{key:"getHighestIngredientLvl",value:function(){var e=0;if(this.ingredients){var n,t=Object(m.a)(this.ingredients);try{for(t.s();!(n=t.n()).done;){var a=n.value.getHighestIngredientLvl();a>e&&(e=a)}}catch(i){t.e(i)}finally{t.f()}return e}return this.demon.lvl}}]),e}(),p=function e(n,t){Object(f.a)(this,e),this.caption="",this.demons=[],this.caption=n,this.demons=t},O="Element",y=function(){function e(n,t,a){Object(f.a)(this,e),this.demonJson=void 0,this.fusionChartJson=void 0,this.presetJson=void 0,this.demonAry=[],this.normalFusionChart={},this.tripleFusionChart={},this.demonsPresets=[],this.gameHasElements=!1,this._usePersonaSameRaceFusionMechanic=!1,this._usePersonaTripleFusionMechanic=!1,this.disableSameDemonFusion=!1,this.idMap={},this.nameMap={},this.raceOrderMap={},this.raceLvlDemonMap={},this.demonJson=n,this.fusionChartJson=t,this.presetJson=a,this.parseDemons(),this.prepDemonIds(),this.parseFusionChart(),this.prepRaceLvlInfo(),this.parsePresets()}return Object(v.a)(e,[{key:"getDemonById",value:function(e){return this.idMap[e]}},{key:"getDemonByName",value:function(e){return this.nameMap[e]}},{key:"getDemonArray",value:function(){return this.demonAry}},{key:"getDemonPresets",value:function(){return this.demonsPresets}},{key:"fuseDemons",value:function(e,n){if(e.id!==n.id||!this.disableSameDemonFusion)return e.race===O&&n.race===O?void 0:e.race===O||n.race===O?this.fuseDemonWithElement(e,n):e.race===n.race?this.fuseDemonSameRaceNoElement(e,n):this.fuseDemonDiffRaceNoElement(e,n)}},{key:"tripleFuseDemons",value:function(e,n,t){var a=this;if(!this.disableSameDemonFusion||e.id!==n.id&&e.id!==t.id&&n.id!==t.id){var i=[e,n,t].sort((function(e,n){return e.lvl!==n.lvl?e.lvl-n.lvl:a.getRaceOrder(n.race)-a.getRaceOrder(e.race)})),r=Object(l.a)(i,3),s=r[0],o=r[1],c=r[2],u=this.getFusionRace(s.race,o.race);if(u){var d=this.getTripleFusionRace(u,c.race);if(d){var h=this.getLvlTableForRace(d,!0),m=(s.lvl+o.lvl+c.lvl+12.75)/3,f=this.findResultLvlFromLvlTable(h,m,!0),v=this.getDemonFromRaceLvl(d,f);if(v){if(v.id!==s.id&&v.id!==o.id&&v.id!==c.id)return v;var b=h.indexOf(f);if(!(b<0))return b+1<h.length?(f=h[b+1],this.getDemonFromRaceLvl(d,f)):void 0}}}}}},{key:"testGetDemon",value:function(e){if(e)return this.getDemonByName(e);if(0!==this.demonAry.length){var n=Math.floor(Math.random()*this.demonAry.length);return this.demonAry[n]}}},{key:"testGetRandomElement",value:function(){if(this.fusionChartJson.elements&&0!==this.fusionChartJson.elements.length){var e=Math.floor(Math.random()*this.fusionChartJson.elements.length);return this.getDemonByName(this.fusionChartJson.elements[e])}}},{key:"testFuseDemonWithAll",value:function(e){var n=this.testGetDemon(e);if(n){for(var t={},a=0;a<this.demonAry.length;a++){var i=this.demonAry[a],r=this.fuseDemons(n,i);r&&(t[i.name]=r)}console.log(n),console.log(t)}}},{key:"testTripleFuseDemonWithAll",value:function(e){var n=this.testGetDemon(e);if(n){for(var t={},a={},i=0;i<this.demonAry.length;i++)for(var r=this.demonAry[i],s=i;s<this.demonAry.length;s++){var o=this.demonAry[s],c=this.tripleFuseDemons(n,r,o);c&&(t[c.name]||(t[c.name]=[]),a[c.name]||(a[c.name]={}),a[c.name][r.name]||(a[c.name][r.name]=[]),a[c.name][o.name]||(a[c.name][o.name]=[]),t[c.name].push([r,o]),a[c.name][r.name].push(o.name),a[c.name][o.name].push(r.name))}console.log(n),console.log(t),console.log(a)}}},{key:"parseDemons",value:function(){g.statsName=this.demonJson.statsName;var e=this.demonJson.demons;for(var n in e){var t=e[n];this.demonAry.push(new g(0,n,t.lvl,t.race,t.stats))}}},{key:"parseFusionChart",value:function(){this.fusionChartJson.elements&&this.fusionChartJson.elements.length>0&&(this.gameHasElements=!0),this.fusionChartJson.usePersonaSameRaceFusionMechanic&&(this._usePersonaSameRaceFusionMechanic=!0),this.fusionChartJson.usePersonaTripleFusionMechanic&&(this._usePersonaTripleFusionMechanic=!0),this.fusionChartJson.disableSameDemonFusion&&(this.disableSameDemonFusion=!0);for(var e=0;e<this.fusionChartJson.raceFusionTable.length;e++)for(var n=0;n<this.fusionChartJson.raceFusionTable[e].length;n++){var t=[];if(this._usePersonaTripleFusionMechanic)n<e?t.push(this.tripleFusionChart):n===e?(t.push(this.tripleFusionChart),t.push(this.normalFusionChart)):t.push(this.normalFusionChart);else{if(n>e)continue;t.push(this.normalFusionChart)}for(var a=this.fusionChartJson.races[e],i=this.fusionChartJson.races[n],r=this.fusionChartJson.raceFusionTable[e][n],s=0,o=t;s<o.length;s++){var c=o[s];c[a]||(c[a]={}),c[a][i]=r,c[i]||(c[i]={}),c[i][a]=r}}if(this.fusionChartJson.specialRecipes)for(var l in this.fusionChartJson.specialRecipes){var u=this.getDemonByName(l);u&&(u.specialRecipe=!0,u.rank=1e3)}for(var d=0;d<this.fusionChartJson.races.length;d++)this.raceOrderMap[this.fusionChartJson.races[d]]=d}},{key:"parsePresets",value:function(){if(this.presetJson){var e,n=Object(m.a)(this.presetJson.presets);try{for(n.s();!(e=n.n()).done;){var t,a=e.value,i=[],r=Object(m.a)(a.demons);try{for(r.s();!(t=r.n()).done;){var s=t.value,o=this.getDemonByName(s);o&&i.push(o)}}catch(l){r.e(l)}finally{r.f()}var c=new p(a.caption,i);this.demonsPresets.push(c)}}catch(l){n.e(l)}finally{n.f()}}}},{key:"prepDemonIds",value:function(){this.demonAry=this.demonAry.sort((function(e,n){return e.lvl>n.lvl?1:-1}));var e,n=1,t=Object(m.a)(this.demonAry);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.id=n,this.idMap[a.id]=a,this.nameMap[a.name]=a,n++}}catch(i){t.e(i)}finally{t.f()}}},{key:"prepRaceLvlInfo",value:function(){var e,n=Object(m.a)(this.demonAry);try{for(n.s();!(e=n.n()).done;){var t=e.value;this.raceLvlDemonMap[t.race]||(this.raceLvlDemonMap[t.race]={}),this.raceLvlDemonMap[t.race][t.lvl]=t}}catch(s){n.e(s)}finally{n.f()}var a,i=Object(m.a)(this.demonAry);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.specialRecipe||(r.rank=this.getLvlTableForRace(r.race,!0).indexOf(r.lvl))}}catch(s){i.e(s)}finally{i.f()}}},{key:"getLvlTableForRace",value:function(e,n){if(!this.raceLvlDemonMap[e])return[];var t=[];for(var a in this.raceLvlDemonMap[e])n&&this.raceLvlDemonMap[e][a].specialRecipe||t.push(Number(a));return t}},{key:"getDemonFromRaceLvl",value:function(e,n){if(this.raceLvlDemonMap[e]&&this.raceLvlDemonMap[e][n])return this.raceLvlDemonMap[e][n]}},{key:"getFusionRace",value:function(e,n){if(this.normalFusionChart[e]&&this.normalFusionChart[e][n])return this.normalFusionChart[e][n]}},{key:"getTripleFusionRace",value:function(e,n){if(this.tripleFusionChart[e]&&this.tripleFusionChart[e][n])return this.tripleFusionChart[e][n]}},{key:"getRaceOrder",value:function(e){return this.raceOrderMap[e]}},{key:"findResultLvlFromLvlTable",value:function(e,n,t){for(var a=0,i=0;i<e.length;i++)n>e[i]&&a++;if(a>=e.length){if(t)return-1;a=e.length-1}return e[a]}},{key:"fuseDemonDiffRaceNoElement",value:function(e,n){var t=this.getFusionRace(e.race,n.race);if(t){var a=this.getLvlTableForRace(t,!0);if(0!==a.length){var i=(n.lvl+e.lvl+1)/2,r=this.findResultLvlFromLvlTable(a,i);return this.getDemonFromRaceLvl(t,r)}}}},{key:"fuseDemonSameRaceNoElement",value:function(e,n){if(this.gameHasElements){var t=this.getFusionRace(e.race,n.race);if(!t)return;return this.getDemonByName(t)}if(this._usePersonaSameRaceFusionMechanic){var a,i=this.getLvlTableForRace(n.race,!0).filter((function(n){return n!==e.lvl})),r=-1,s=Object(m.a)(i);try{for(s.s();!(a=s.n()).done;){var o=a.value;e.lvl+n.lvl>=2*o&&(r+=1)}}catch(l){s.e(l)}finally{s.f()}if(i[r]===n.lvl&&(r-=1),r<0)return;var c=i[r];return this.getDemonFromRaceLvl(e.race,c)}}},{key:"fuseDemonWithElement",value:function(e,n){var t,a;if(e.race===O)t=e,a=n;else{if(n.race!==O)return this.fuseDemonSameRaceNoElement(e,n);t=n,a=e}var i=this.fusionChartJson.races.indexOf(a.race);if(!(i<0||i>=this.fusionChartJson.elementFusionTable.length)){var r=this.fusionChartJson.elementFusionTable[i][t.rank],s=this.getLvlTableForRace(a.race),o=a.rank+r;if(!(o<0||o>=s.length))return this.getDemonFromRaceLvl(a.race,s[o])}}},{key:"usePersonaTripleFusionMechanic",get:function(){return this._usePersonaTripleFusionMechanic}},{key:"usePersonaSameRaceFusionMechanic",get:function(){return this._usePersonaSameRaceFusionMechanic}}]),e}(),x=t(57),C=t(195),F=t(197),D=t(190),_=t(194),S=t(196),k=t(193),R=t(150),N=t(203),I=t(113),L=t(63),A=t.n(L),B=function(e){var n=e.dataTableProvider,t=r.a.useState(0),i=Object(l.a)(t,2),s=i[0],o=i[1],c=r.a.useState(void 0),u=Object(l.a)(c,2),d=u[0],h=u[1],f=r.a.useState(void 0),v=Object(l.a)(f,2),g=v[0],j=v[1],p=r.a.useState("string"),O=Object(l.a)(p,2),y=O[0],x=O[1],N=n.pageSize,L=n.getColumnDefinition(),B=n.getRowData(),T=B.length;if(0===T){var J=Object(a.jsx)(r.a.Fragment,{}),U=n.renderBanner?n.renderBanner():void 0;return U&&(J=U),J}var E=B.map((function(e,n){return{id:n,data:e}}));if(d&&void 0!==g){var H="asc"===g?1:-1,V="number"===y?w:M;E.sort((function(e,t){var a=n.getSortValue(e.data,d),i=n.getSortValue(t.data,d);return H*V(a,i)}))}var z=E.filter((function(e,n){return n>=s*N&&n<(s+1)*N}));var G,q=[],W=0,K=Object(m.a)(L);try{for(K.s();!(G=K.n()).done;){var Q=G.value,X=Q.sortSpec?P(Q.headerContent,W,Q.sortSpec.sortType,[d,h],[g,j],[y,x]):Q.headerContent;q.push(Object(a.jsx)(D.a,Object(b.a)(Object(b.a)({},Q.headerProps),{},{children:X}))),W++}}catch(ne){K.e(ne)}finally{K.f()}var Y,Z=[],$=Object(m.a)(z);try{for($.s();!(Y=$.n()).done;){var ee=Y.value;Z.push(Object(a.jsx)(k.a,{children:n.renderRow(ee.data)},ee.id))}}catch(ne){$.e(ne)}finally{$.f()}return Object(a.jsx)(I.a,{className:A.a.paperContainer,elevation:1,children:Object(a.jsxs)(_.a,{className:A.a.tableContainer,children:[Object(a.jsxs)(C.a,{children:[Object(a.jsx)(S.a,{className:A.a.header,children:Object(a.jsx)(k.a,{children:q})}),Object(a.jsx)(F.a,{className:A.a.tableBody,children:Z})]}),Object(a.jsx)(R.a,{rowsPerPageOptions:[N],component:"div",count:T,rowsPerPage:N,page:s,onChangePage:function(e,n){o(n)}})]})})};function M(e,n){return e>n?1:e===n?0:-1}function w(e,n){return e-n}function P(e,n,t,i,r,s){var o=Object(l.a)(i,1)[0],c=Object(l.a)(r,1)[0];return Object(a.jsx)(N.a,{active:o===n&&void 0!==c,direction:o===n?c:void 0,onClick:T(n,t,i,r,s),children:e})}function T(e,n,t,a,i){return function(r){var s=Object(l.a)(t,2),o=s[0],c=s[1],u=Object(l.a)(a,2),d=u[0],h=u[1],m=Object(l.a)(i,2)[1],f=d;o===e?("asc"===d&&(f="desc"),"desc"===d&&(f=void 0),void 0===d&&(f="asc")):f="asc",h(f),c(e),m(n)}}var J,U=t(116),E=t(101),H=t.n(E),V=t(81),z=t.n(V),G=function(e){return Object(a.jsxs)(I.a,{elevation:1,className:z.a.warningBanner,children:[Object(a.jsx)(H.a,{className:z.a.warningIcon}),Object(a.jsx)("span",{children:e.message})]})},q=r.a.memo(G),W=t(46),K=t(102),Q=t.n(K),X=t(77),Y=t.n(X);function Z(e){return Object(a.jsx)(W.a,{onClick:function(n){e.onRemoveIngredient&&e.onRemoveIngredient(e.demonId)},className:Y.a.removeDemonButton,children:Object(a.jsx)(Q.a,{className:Y.a.removeDemonButtonIcon})})}function $(e){var n=e.demonId,t=e.setting,i=e.ingredientsSettings,r=!1;switch(t){case J.mustUse:r=i[n].mustUse;break;case J.multipleUse:default:r=i[n].multipleUse}return Object(a.jsx)(U.a,{className:Y.a.checkBox,defaultChecked:r,onChange:function(e,a){switch(t){case J.mustUse:i[n].mustUse=e.target.checked;break;case J.multipleUse:default:i[n].multipleUse=e.target.checked}},color:"default"})}!function(e){e[e.multipleUse=1]="multipleUse",e[e.mustUse=2]="mustUse"}(J||(J={}));var ee=function(){function e(n,t){Object(f.a)(this,e),this.pageSize=25,this.demonCompendium=void 0,this.ingredients=void 0,this.ingredientsSettings=void 0,this.onRemoveIngredient=void 0,this.rowData=void 0,this.demonCompendium=n.demonCompendium,this.ingredients=n.ingredients,this.ingredientsSettings=n.ingredientsSettings,this.onRemoveIngredient=n.onRemoveIngredient,this.rowData=t}return Object(v.a)(e,[{key:"getColumnDefinition",value:function(){return[{headerContent:"Demon",sortSpec:{sortType:"string"}},{headerContent:"Level",sortSpec:{sortType:"number"}},{headerContent:"Race",sortSpec:{sortType:"string"}},{headerContent:"Must Use in Fusion",headerProps:{width:70,align:"center"}},{headerContent:"Can Use Multiple per Recipe",headerProps:{width:120,align:"center"}},{}]}},{key:"getRowData",value:function(){return this.rowData}},{key:"renderRow",value:function(e){return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(D.a,{children:e.name}),Object(a.jsx)(D.a,{children:e.lvl}),Object(a.jsx)(D.a,{children:e.race}),Object(a.jsx)(D.a,{align:"center",children:Object(a.jsx)($,{demonId:e.id,setting:J.mustUse,ingredientsSettings:this.ingredientsSettings})}),Object(a.jsx)(D.a,{align:"center",children:Object(a.jsx)($,{demonId:e.id,setting:J.multipleUse,ingredientsSettings:this.ingredientsSettings})}),Object(a.jsx)(D.a,{children:Object(a.jsx)(Z,{demonId:e.id,onRemoveIngredient:this.onRemoveIngredient})})]})}},{key:"getSortValue",value:function(e,n){switch(n){case 0:return e.name;case 1:return e.lvl;case 2:return e.race;default:return e.name}}},{key:"renderBanner",value:function(){return Object(a.jsx)(q,{message:"No ingredient demons. Use the above section to add in demons to use in your fusions."})}}]),e}(),ne=function(e){!function(e,n){for(var t in e)n[t]||(n[t]={mustUse:!1,multipleUse:!1})}(e.ingredients,e.ingredientsSettings);var n=r.a.useMemo((function(){var n=[];for(var t in e.ingredients){var a=e.demonCompendium.getDemonById(Number(t));a&&n.push(a)}return n}),[e.ingredients,e.demonCompendium]),t=new ee(e,n);return Object(a.jsx)(B,{dataTableProvider:t})},te=r.a.memo(ne),ae=t(103),ie=t(26),re=t.n(ie);function se(e){return e.isFused()?Object(a.jsx)(r.a.Fragment,{children:e.demon.name}):Object(a.jsx)("span",{className:re.a.baseIngredientName,children:e.demon.name})}function oe(e){var n=Object(a.jsx)(r.a.Fragment,{});if(e.ingredients){var t,i=Object(a.jsx)(r.a.Fragment,{}),s=!0,o=Object(m.a)(e.ingredients);try{for(o.s();!(t=o.n()).done;){var c=t.value;n=Object(a.jsxs)(r.a.Fragment,{children:[n,oe(c)]});var l=s?void 0:Object(a.jsx)(r.a.Fragment,{children:" + "});i=Object(a.jsxs)(r.a.Fragment,{children:[i,l,se(c)]}),s=!1}}catch(d){o.e(d)}finally{o.f()}var u=se(e);return Object(a.jsxs)(r.a.Fragment,{children:[n,Object(a.jsxs)("div",{className:re.a.recipeLine,children:[i," = ",u]})]})}return n}function ce(e){return Object(a.jsx)("div",{children:oe(e.value)})}function le(e){return e.value.toBaseIngredientSearchString()}var ue=function(e){for(var n=e.fusionResults,t=[{field:"name",headerName:"Demon",width:120},{field:"lvl",headerName:"Level",width:70,headerAlign:"center",resizable:!1,disableColumnMenu:!0},{field:"race",headerName:"Race",width:100,headerAlign:"center",resizable:!1}],r=g.statsName,s=0;s<r.length;s++)t.push({field:"stat"+s,headerName:r[s],width:60,headerAlign:"center",resizable:!1,disableColumnMenu:!0});t.push({field:"recipe",headerName:"Recipe",flex:1,renderCell:ce,valueGetter:le});var o=[];for(var c in n)if(1!==Number(c))for(var l in n[c]){var u,d=Object(m.a)(n[c][l]);try{for(d.s();!(u=d.n()).done;){for(var h=u.value,f=h.demon,v={id:0,name:f.name,lvl:f.lvl,race:f.race,recipe:h},b=0;b<r.length;b++)v["stat"+b]=f.stats[b];o.push(v)}}catch(x){d.e(x)}finally{d.f()}}o.sort((function(e,n){return n.lvl-e.lvl}));for(var j=1,p=0,O=o;p<O.length;p++){O[p].id=j,j++}var y=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e=y.current;if(e){var n=e.querySelector("div");n.style.height="",n.style.width=""}}),[]),Object(a.jsx)(ae.a,{rows:o,rowHeight:75,className:re.a.fusionResultsTable,columns:t,disableSelectionOnClick:!0,autoHeight:!0,rowsPerPageOptions:[10],density:"compact"})},de=r.a.memo(ue),he=t(118),me=t(145),fe=t(56),ve=t.n(fe),be=function e(){Object(f.a)(this,e),this.charLvl=99,this.maxIngredient=3,this.useTripleFusion=!1,this.useTripleFusionSettingIsVisible=!1};function ge(e){var n=e.visible,t=e.settings,r=Object(i.useState)(t.charLvl),s=Object(l.a)(r,2),o=s[0],c=s[1],u=Object(i.useState)(t.maxIngredient),d=Object(l.a)(u,2),h=d[0],m=d[1];var f={};return n||(f.display="none"),Object(a.jsxs)("div",{style:f,className:ve.a.settingsPanel,children:[Object(a.jsx)("h2",{children:"Settings"}),Object(a.jsx)(je,{label:"Character level",min:1,max:99,emptyFieldValue:99,fieldStateValueAndSetter:[o,c],onSetSettings:function(e){t.charLvl=e}}),Object(a.jsx)(je,{label:"Max ingredients per recipe",min:2,max:5,emptyFieldValue:3,fieldStateValueAndSetter:[h,m],onSetSettings:function(e){t.maxIngredient=e}}),t.useTripleFusionSettingIsVisible?Object(a.jsx)(pe,{label:"Allow triple fusion",checked:t.useTripleFusion,onSetSettings:function(e){t.useTripleFusion=e}}):void 0]})}function je(e){var n=e.label,t=e.fieldStateValueAndSetter,i=e.onSetSettings,r=e.min,s=e.max,o=e.emptyFieldValue,c=Object(l.a)(t,2),u=c[0],d=c[1];return Object(a.jsxs)("div",{className:"".concat(ve.a.settingsLine," ").concat(ve.a.numberSettings),children:[Object(a.jsx)("span",{className:ve.a.numberFieldLabel,children:n}),Object(a.jsx)(he.a,{style:{width:"50px"},type:"number",InputLabelProps:{shrink:!0},inputProps:{min:r,max:s,step:1},variant:"outlined",value:u,onChange:function(e){var n=e.target.value;if(""===n)return d(""),void i(o);var t=Number(n);t>=r&&t<=s&&(d(t),i(t))}})]})}function pe(e){var n=e.label,t=e.checked,i=e.onSetSettings;return Object(a.jsx)("div",{className:"".concat(ve.a.settingsLine),children:Object(a.jsx)(me.a,{control:Object(a.jsx)(U.a,{defaultChecked:t,onChange:function(e){i(e.target.checked)},color:"default"}),label:n})})}var Oe=t(202),ye=t(105),xe=t.n(ye);function Ce(e){var n=e.demonCompendium,t=e.onAddDemon,i=Object(a.jsx)(r.a.Fragment,{});return n.getDemonPresets().length>0&&(i=Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)("p",{children:"Add from presets"}),Object(a.jsx)(_e,{demonCompendium:n,onAddDemon:t})]})),Object(a.jsxs)("div",{className:re.a.demonAdderContainer,children:[Object(a.jsx)("p",{children:"Add by searching"}),Object(a.jsx)(Fe,{demonCompendium:n,onAddDemon:t}),Object(a.jsx)("p",{children:"Add by entering level range"}),Object(a.jsx)(De,{demonCompendium:n,onAddDemon:t}),i]})}function Fe(e){var n=e.demonCompendium,t=e.onAddDemon,r=Object(i.useState)(null),s=Object(l.a)(r,2),o=s[0],c=s[1],u=n.getDemonArray();function d(){o&&(t([o]),c(null))}return Object(a.jsxs)("div",{className:re.a.subAdderContainer,children:[Object(a.jsx)(Oe.a,{value:o,options:u,onChange:function(e,n){c(n)},onKeyPress:function(e){"Enter"===e.key&&d()},getOptionLabel:function(e){return e.name},getOptionSelected:function(e,n){return e.id===n.id},style:{width:300},autoHighlight:!0,autoSelect:!0,renderInput:function(e){return Object(a.jsx)(he.a,Object(b.a)(Object(b.a)({},e),{},{label:"Enter demon name",variant:"outlined"}))}}),Object(a.jsx)(Se,{onClick:function(){d()}})]})}function De(e){var n=e.demonCompendium,t=e.onAddDemon,r=Object(i.useState)(1),s=Object(l.a)(r,2),o=s[0],c=s[1],u=Object(i.useState)(99),d=Object(l.a)(u,2),h=d[0],f=d[1];function v(e){for(var n=e.key,t=!1,a=0,i=["0","1","2","3","4","5","6","7","8","9"];a<i.length;a++){if(n===i[a]){t=!0;break}}t||(e.preventDefault(),e.stopPropagation())}function b(e,n){var t=n.target.value,a=Number(t);(""===t||a>=1&&a<=99)&&e(n.target.value)}return Object(a.jsxs)("div",{className:re.a.subAdderContainer,children:[Object(a.jsxs)("div",{className:re.a.lvlFieldsContainer,children:[Object(a.jsx)(he.a,{label:"Min Lv",style:{width:"147px"},type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:o,onChange:b.bind(void 0,c),onKeyPress:v}),Object(a.jsx)(he.a,{label:"Max Lv",style:{width:"147px"},type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:h,onKeyPress:v,onChange:b.bind(void 0,f)})]}),Object(a.jsx)(Se,{onClick:function(){var e,a=[],i=Object(m.a)(n.getDemonArray());try{for(i.s();!(e=i.n()).done;){var r=e.value;r.lvl>=o&&r.lvl<=h&&a.push(r)}}catch(s){i.e(s)}finally{i.f()}t(a)}})]})}function _e(e){var n,t=e.demonCompendium,r=e.onAddDemon,s=Object(i.useState)(null),o=Object(l.a)(s,2),c=o[0],u=o[1],d=[],h=1,f=Object(m.a)(t.getDemonPresets());try{for(f.s();!(n=f.n()).done;){var v=n.value;d.push({id:h,preset:v}),h++}}catch(j){f.e(j)}finally{f.f()}function g(){c&&(r(c.preset.demons),u(null))}return Object(a.jsxs)("div",{className:re.a.subAdderContainer,children:[Object(a.jsx)(Oe.a,{value:c,options:d,onChange:function(e,n){u(n)},onKeyPress:function(e){"Enter"===e.key&&g()},getOptionLabel:function(e){return e.preset.caption},getOptionSelected:function(e,n){return e.id===n.id},style:{width:300},autoHighlight:!0,autoSelect:!0,renderInput:function(e){return Object(a.jsx)(he.a,Object(b.a)(Object(b.a)({},e),{},{label:"Select a preset",variant:"outlined"}))}}),Object(a.jsx)(Se,{onClick:function(){g()}})]})}function Se(e){var n=e.onClick;return Object(a.jsxs)(x.a,{variant:"outlined",onClick:n,className:re.a.addDemonButton,children:[Object(a.jsx)(xe.a,{}),"Add"]})}var ke,Re,Ne=t(108),Ie=t.n(Ne),Le=t(106),Ae=t.n(Le),Be=t(107),Me=t.n(Be),we=t(45),Pe=t.n(we);function Te(e,n,t,a,i){for(var r=[];Je(r,i);){var s=r[0],o=r[1],c=r[2],l={};for(var u in a[s])if(0!==a[s][u].length){var d=a[s][u][0].demon,h={};for(var f in a[o])if(!l[Number(f)]&&0!==a[o][f].length){var v=a[o][f][0].demon;for(var b in a[c])if(!l[Number(b)]&&!h[Number(b)]&&0!==a[c][b].length){var g=a[c][b][0].demon,j=n.tripleFuseDemons(d,v,g);if(j&&Ue(a,t,j,i,[d,v,g])){var p=Ee(j,a[s][u],a[o][f],a[c][b]);a[i][j.id]||(a[i][j.id]=[]);var O,y=Object(m.a)(p);try{for(y.s();!(O=y.n()).done;){var x=O.value;a[i][j.id].push(x)}}catch(C){y.e(C)}finally{y.f()}}}h[v.id]=!0}l[d.id]=!0}}}function Je(e,n){if(n<3)return!1;if(e.length<3)return e[0]=n-2,e[1]=1,e[2]=1,!0;for(var t=e.length-2;t>=0;t--){var a=t+1;if(e[t]-e[a]>=2)return e[t]=e[t]-1,e[a]=e[a]+1,!0}return!1}function Ue(e,n,t,a,i){for(var r=!1,s=a-1;s>=1;s--)if(e[s][t.id]){r=!0;break}if(r)return!1;if(t.lvl>n.charLvl)return!1;if(a===n.maxIngredient){var o,c=Object(m.a)(i);try{for(c.s();!(o=c.n()).done;){var l=o.value;if(t.lvl<l.lvl)return!1}}catch(u){c.e(u)}finally{c.f()}}return!0}function Ee(e){for(var n=[],t=[],a=arguments.length,i=new Array(a>1?a-1:0),r=1;r<a;r++)i[r-1]=arguments[r];for(var s=0;s<i.length;s++)n.push(0);for(;;){for(var o=[],c=0;c<i.length;c++)o.push(i[c][n[c]]);t.push(new j(e,o));for(var l=!0,u=n.length-1;u>=0;u--){var d=n[u];if(l&&(d+=1,l=!1),d>=i[u].length&&(d=0,l=!0),n[u]=d,!l)break}if(l)break}return t}function He(e){var n=Object(b.a)({},ke);delete n[e],Re(n)}var Ve,ze={};function Ge(e){var n=e.demonCompendium,t=Object(i.useState)({}),r=Object(l.a)(t,2);ke=r[0],Re=r[1];var s=Object(i.useState)({}),o=Object(l.a)(s,2),c=o[0],u=o[1],d=Object(i.useState)(!1),h=Object(l.a)(d,2),f=h[0],v=h[1],g=Object(i.useState)(1),p=Object(l.a)(g,2),O=p[0],y=p[1];Ve||((Ve=new be).useTripleFusion=n.usePersonaTripleFusionMechanic,Ve.useTripleFusionSettingIsVisible=n.usePersonaTripleFusionMechanic);var C=Object(i.useRef)(null);return Object(a.jsxs)("div",{className:Pe.a.fusionRecommender,children:[Object(a.jsx)("h2",{children:"Add demons to use as fusion ingredients"}),Object(a.jsxs)("div",{className:Pe.a.addDemonsAndButtonsRowContainer,children:[Object(a.jsx)(Ce,{demonCompendium:n,onAddDemon:function(e){var n,t=Object(b.a)({},ke),a=Object(m.a)(e);try{for(a.s();!(n=a.n()).done;){t[n.value.id]=!0}}catch(i){a.e(i)}finally{a.f()}Re(t)}},O),Object(a.jsxs)("div",{className:Pe.a.buttonsRow,children:[Object(a.jsxs)(x.a,{className:Pe.a.calculateButton,variant:"outlined",onClick:function(){u(function(e,n,t){for(var a={},i=1;i<=t.maxIngredient&&i<=7;i++)a[i]={};for(var r in e){var s=n.getDemonById(Number(r));if(s){var o=new j(s);a[1][s.id]||(a[1][s.id]=[]),a[1][s.id].push(o)}}for(var c=2;c<=t.maxIngredient&&c<=7;c++){for(var l=c-1;l>=c/2;l--){var u=c-l,d={};for(var h in a[l])if(0!==a[l][h].length){var f=a[l][h][0].demon;for(var v in a[u])if(0!==a[u][v].length){var b=a[u][v][0].demon;if(!d[b.id]){var g=n.fuseDemons(f,b);if(g&&Ue(a,t,g,c,[f,b])){var p=Ee(g,a[l][h],a[u][v]);a[c][g.id]||(a[c][g.id]=[]);var O,y=Object(m.a)(p);try{for(y.s();!(O=y.n()).done;){var x=O.value;a[c][g.id].push(x)}}catch(_){y.e(_)}finally{y.f()}}}}d[f.id]=!0}}t.useTripleFusion&&Te(0,n,t,a,c)}for(var C in a)if(1!==Number(C))for(var F in a[C]){var D=a[C][F].filter((function(e){return!e.isWeakerThanIngredients()}));a[C][F]=D}return a}(ke,n,Ve))},disabled:0===Object.keys(ke).length,children:[Object(a.jsx)(Ae.a,{}),"Calculate"]}),Object(a.jsx)(x.a,{className:Pe.a.settingsButton,variant:"outlined",onClick:function(){v(!f),console.log(ze)},children:Object(a.jsx)(Me.a,{})}),Object(a.jsxs)(x.a,{className:Pe.a.resetButton,variant:"outlined",onClick:function(){Re({}),ze={},u({}),y((O+1)%2)},children:[Object(a.jsx)(Ie.a,{}),"Reset"]})]})]}),Object(a.jsx)(ge,{visible:f,settings:Ve},O),Object(a.jsx)("h2",{children:"Fusion Ingredients"}),Object(a.jsx)(te,{demonCompendium:n,ingredients:ke,ingredientsSettings:ze,onRemoveIngredient:He}),Object(a.jsx)("h2",{ref:C,children:"Results"}),Object(a.jsx)(de,{fusionResults:c})]})}t(140);var qe=Object(u.a)({palette:{type:"dark"},typography:{fontFamily:"sans-serif",fontSize:14}});function We(){var e=Object(i.useState)(void 0),n=Object(l.a)(e,2),s=n[0],o=n[1];Object(i.useEffect)((function(){s||function(e){var n=t.e(4).then(t.t.bind(null,206,3)).then((function(e){return e.default})),a=t.e(5).then(t.t.bind(null,207,3)).then((function(e){return e.default}));Promise.all([n,a]).then((function(n){var t=new y(n[0],n[1]);e(t)}))}(o)}),[s]);var c=s?Object(a.jsx)(Ge,{demonCompendium:s}):Object(a.jsx)(r.a.Fragment,{});return Object(a.jsxs)(d.a,{theme:qe,children:[Object(a.jsx)(h.a,{}),Object(a.jsxs)("div",{className:"myApp",children:[Object(a.jsx)("header",{className:"App-header",children:Object(a.jsx)("h1",{children:"Megami Tensei Fusion Recommender"})}),c]})]})}o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(We,{})}),document.getElementById("root")),c()},26:function(e,n,t){e.exports={demonAdderContainer:"ui-components_demonAdderContainer__1Nq5q",subAdderContainer:"ui-components_subAdderContainer__2g7zq",lvlFieldsContainer:"ui-components_lvlFieldsContainer__1oqYT",addDemonButton:"ui-components_addDemonButton__1Md5N",removeDemonButtonIcon:"ui-components_removeDemonButtonIcon__1s3G_",fusionResultsTable:"ui-components_fusionResultsTable__1u69P",baseIngredientName:"ui-components_baseIngredientName__2H65N",recipeLine:"ui-components_recipeLine__3sZ1S"}},45:function(e,n,t){e.exports={fusionRecommender:"fusion-recommender_fusionRecommender__a36Mb",addDemonsAndButtonsRowContainer:"fusion-recommender_addDemonsAndButtonsRowContainer__1C96X",buttonsRow:"fusion-recommender_buttonsRow__11YX6",calculateButton:"fusion-recommender_calculateButton__131L0",shining:"fusion-recommender_shining__3QU1f",settingsButton:"fusion-recommender_settingsButton__33qdF",resetButton:"fusion-recommender_resetButton__2H_EY"}},56:function(e,n,t){e.exports={settingsPanel:"settings-panel_settingsPanel__Jlbex",settingsLine:"settings-panel_settingsLine__1HRFl",numberSettings:"settings-panel_numberSettings__RpSac",numberFieldLabel:"settings-panel_numberFieldLabel__30ovM"}},63:function(e,n,t){e.exports={paperContainer:"data-table_paperContainer__yXedv",tableContainer:"data-table_tableContainer__2trr1",header:"data-table_header__19DGp",tableBody:"data-table_tableBody__1DiId"}},77:function(e,n,t){e.exports={checkBox:"ingredients-table_checkBox__3TQeR",removeDemonButton:"ingredients-table_removeDemonButton__3uoAu",removeDemonButtonIcon:"ingredients-table_removeDemonButtonIcon__2l4m2"}},81:function(e,n,t){e.exports={warningBanner:"minor-ui-components_warningBanner__27C77",warningIcon:"minor-ui-components_warningIcon__QMBuS"}}},[[141,1,2]]]);
//# sourceMappingURL=main.c3688a0b.chunk.js.map